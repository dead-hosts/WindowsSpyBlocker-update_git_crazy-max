env:
  global:
    - secure: AqeqLudEuE5RkyjxAUL5AGFpejuF/H4fBPNqJPhTA+HyP7D3Q2mCpL+9C/aknRvf+rGO32lJ44FnzVzbJpeor6TECwN5sEnBVfCFriU3LK/3jBXkft02GCHRnr1z2NJRhzR4z2UD4CgoP2WzRl6c0iM5rA6zvlSz/j10/I5lip71hmipvYPCFZXOBganjaCLmippNMLRjCUl/RviJ3ttILF1MXUl6byMXwGzUIGCDOzU2J0+jmN1QIE55Uj577KIZddK4ojFe6wP7EQKZwes3yzd/Q3Nd5DjQ7DNUGjfEcxG6evxvA7A6WmgGKpbHyYxcyZP6HQhXvhxaDCXWjpnnzlP3V2POgFRCVnCUpK7q6okjvEmPlxFsmq2szQpZYEBph6SBlUV9txYgF5SC+OSt4XvQIPX2OTQeq4aGLS6gCDGfLUwCRuOmHdvd+ELNcDUpBqO89Fa8mfNGTRzITSwAx6yghvDdQR2C8alIqN1uCY4y8DjgON+lf6EZV8kCL/9V5V6JbFvepCgYozi00NnBlKav6mPfuCNUlKuVs4F+hsl1tQbg88tSFN0c6rhyVPY1vv+OjVCZ6g/X1Sex5XcnsWjEGzsXFdE1szOby4DUSmHB7POT0+74jWXys/FNrlBSSrO8Tc9pE66c15i8dsuZ1h/eb3y4AdaJ05xbrc9YG8=
    - GIT_NAME: Travis CI
    - GIT_EMAIL: dead-hosts@funilrys.com
    - TRAVIS_REPO_SLUG: dead-hosts/WindowsSpyBlocker-update_git_crazy-max
    - GIT_BRANCH: master
    - UPDATE_ME_LOCATION: https://raw.githubusercontent.com/dead-hosts/repository-structure/master/update_me.py
    - ADMIN_LOCATION: https://raw.githubusercontent.com/dead-hosts/repository-structure/master/admin.py

dist: xenial
sudo: required

language: python

python:
  - "3.7"

matrix:
  fast_finish: true

cache:
  - pip

addons:
  apt:
    packages:
      - dos2unix

install:
  - pip3 install --upgrade pip
  - pip3 install requests

before_script:
  - if [[ ! -f .administrators ]]; then wget "${UPDATE_ME_LOCATION}" -o /dev/null -O update_me.py && chmod +x update_me.py; else echo "update_me not downloaded :)"; fi
  - if [[ ! -f .administrators ]]; then wget "${ADMIN_LOCATION}" -o /dev/null -O admin.py && chmod +x admin.py; else echo "admin not downloaded :)"; fi

script:
  - python3 update_me.py

notifications:
  on_success: change
  on_failure: always
